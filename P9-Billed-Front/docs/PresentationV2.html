<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pr√©sentation Billed - Notes de Frais</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .slide {
            background: white;
            border-radius: 15px;
            padding: 40px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            min-height: 700px;
            display: none;
            overflow-y: auto;
        }

        .slide.active {
            display: block;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            color: #667eea;
            font-size: 2.5em;
            margin-bottom: 20px;
            border-bottom: 4px solid #667eea;
            padding-bottom: 10px;
        }

        h2 {
            color: #764ba2;
            font-size: 1.8em;
            margin: 30px 0 20px 0;
        }

        h3 {
            color: #667eea;
            font-size: 1.4em;
            margin: 20px 0 10px 0;
        }

        .logo {
            text-align: center;
            font-size: 3em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 30px;
        }

        .code-block {
            background: #2d2d2d;
            color: #f8f8f2;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.5;
            position: relative;
        }

        .code-block::before {
            content: attr(data-file);
            display: block;
            background: #1e1e1e;
            color: #fff;
            padding: 5px 10px;
            margin: -20px -20px 15px -20px;
            border-radius: 8px 8px 0 0;
            font-size: 0.85em;
            font-weight: bold;
        }

        .code-line {
            display: block;
            padding: 2px 0;
        }

        .code-line.highlight {
            background: rgba(255, 255, 0, 0.2);
            padding: 2px 5px;
            margin: 0 -5px;
        }

        .code-line.add {
            background: rgba(0, 255, 0, 0.15);
            padding-left: 10px;
        }

        .code-line.add::before {
            content: '+ ';
            color: #4caf50;
            font-weight: bold;
        }

        .code-line.remove {
            background: rgba(255, 0, 0, 0.15);
            padding-left: 10px;
        }

        .code-line.remove::before {
            content: '- ';
            color: #f44336;
            font-weight: bold;
        }

        .bug-card {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .bug-card h4 {
            color: #856404;
            margin-bottom: 10px;
        }

        .fix-card {
            background: #d4edda;
            border-left: 4px solid #28a745;
            padding: 20px;
            margin: 20px 0;
            border-radius: 5px;
        }

        .fix-card h4 {
            color: #155724;
            margin-bottom: 10px;
        }

        .structure-tree {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
            line-height: 1.8;
        }

        .structure-tree .folder {
            color: #667eea;
            font-weight: bold;
        }

        .structure-tree .file {
            color: #28a745;
        }

        .test-card {
            background: #e7f3ff;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .test-card h4 {
            color: #0d47a1;
            margin-bottom: 8px;
        }

        .navigation {
            position: fixed;
            bottom: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
            z-index: 1000;
        }

        .nav-btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 50px;
            cursor: pointer;
            font-size: 1em;
            font-weight: bold;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            transition: all 0.3s;
        }

        .nav-btn:hover {
            background: #764ba2;
            transform: scale(1.05);
        }

        .nav-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .slide-counter {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(255,255,255,0.9);
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            color: #667eea;
        }

        .highlight {
            background: linear-gradient(120deg, #84fab0 0%, #8fd3f4 100%);
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: bold;
        }

        ul {
            margin: 15px 0;
            padding-left: 30px;
        }

        li {
            margin: 10px 0;
            font-size: 1.1em;
        }

        .two-column {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }

        @media (max-width: 768px) {
            .two-column {
                grid-template-columns: 1fr;
            }
        }

        .badge {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: bold;
            margin: 5px;
        }

        .badge-success {
            background: #28a745;
            color: white;
        }

        .badge-warning {
            background: #ffc107;
            color: #333;
        }

        .badge-danger {
            background: #dc3545;
            color: white;
        }

        .badge-info {
            background: #17a2b8;
            color: white;
        }
    </style>
</head>
<body>
<div class="container">
    <!-- Slide 1: Titre -->
    <div class="slide active">
        <div style="text-align: center; padding: 60px 0;">
            <div class="logo">üí∞ BILLED</div>
            <h1>Fonctionnalit√© "Notes de Frais"</h1>
            <p style="font-size: 1.5em; margin-top: 30px; color: #667eea; font-weight: bold;">
                Mise en place et fiabilisation de la solution
            </p>
            <p style="margin-top: 40px; font-size: 1.2em;">
                Soutenance de projet<br>
                <span style="color: #667eea;">10-15 minutes</span>
            </p>
        </div>
    </div>

    <!-- Slide 2: Contexte -->
    <div class="slide">
        <h1>üìã Contexte du Projet</h1>
        <div style="margin-top: 30px;">
            <h2>Situation Initiale</h2>
            <ul>
                <li><strong>üö® D√©part impr√©vu de Garance</strong> - D√©veloppeuse front-end de la feature team</li>
                <li><strong>‚è∞ D√©lais serr√©s</strong> - Lancement officiel pr√©vu dans <span class="highlight">2 semaines</span></li>
                <li><strong>üéØ Mission urgente</strong> - Renfort demand√© par Matthieu (Lead Developer)</li>
            </ul>

            <h2 style="margin-top: 40px;">√âtat d'Avancement Initial</h2>
            <div style="background: #f8f9fa; padding: 25px; border-radius: 10px; margin-top: 20px;">
                <h3>Back-end</h3>
                <p>‚úÖ Pr√™t en version alpha pour les deux parcours (Employ√© + Admin RH)</p>

                <h3 style="margin-top: 20px;">Front-end</h3>
                <ul>
                    <li><strong>Parcours Administrateur RH :</strong> Test√©, √† d√©bugger</li>
                    <li><strong>Parcours Employ√© :</strong> √Ä tester et d√©bugger</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Slide 3: Structure du Projet -->
    <div class="slide">
        <h1>üìÅ Structure du Projet</h1>
        <div style="margin-top: 30px;">
            <h2>Architecture Front-end</h2>
            <div class="structure-tree">
                <span class="folder">P9-Billed-Front/</span><br>
                ‚îú‚îÄ‚îÄ <span class="folder">src/</span><br>
                ‚îÇ   ‚îú‚îÄ‚îÄ <span class="folder">containers/</span><br>
                ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">Bills.js</span> - Gestion de la liste des notes de frais<br>
                ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">NewBill.js</span> - Cr√©ation d'une nouvelle note de frais<br>
                ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ <span class="file">Dashboard.js</span> - Tableau de bord admin<br>
                ‚îÇ   ‚îú‚îÄ‚îÄ <span class="folder">views/</span><br>
                ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">BillsUI.js</span> - Interface utilisateur Bills<br>
                ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ <span class="file">NewBillUI.js</span> - Interface utilisateur NewBill<br>
                ‚îÇ   ‚îú‚îÄ‚îÄ <span class="folder">app/</span><br>
                ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">Store.js</span> - Gestion des donn√©es (API)<br>
                ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ <span class="file">format.js</span> - Utilitaires de formatage<br>
                ‚îÇ   ‚îú‚îÄ‚îÄ <span class="folder">__tests__/</span><br>
                ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ <span class="file">Bills.js</span> - Tests unitaires Bills<br>
                ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ <span class="file">NewBill.js</span> - Tests unitaires NewBill<br>
                ‚îÇ   ‚îî‚îÄ‚îÄ <span class="folder">__mocks__/</span><br>
                ‚îÇ       ‚îú‚îÄ‚îÄ <span class="file">store.js</span> - Mock de l'API<br>
                ‚îÇ       ‚îî‚îÄ‚îÄ <span class="file">localStorage.js</span> - Mock localStorage<br>
                ‚îú‚îÄ‚îÄ <span class="file">package.json</span><br>
                ‚îî‚îÄ‚îÄ <span class="file">README.md</span>
            </div>

            <h2 style="margin-top: 30px;">Technologies Utilis√©es</h2>
            <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 15px;">
                <span class="badge badge-info">JavaScript (ES6+)</span>
                <span class="badge badge-info">Jest</span>
                <span class="badge badge-info">Testing Library</span>
                <span class="badge badge-info">Chrome Debugger</span>
                <span class="badge badge-info">REST API</span>
            </div>
        </div>
    </div>

    <!-- Slide 4: Bugs Identifi√©s - Bills.js -->
    <div class="slide">
        <h1>üêõ Bugs Identifi√©s - Bills.js</h1>
        <div style="margin-top: 30px;">

            <div class="bug-card">
                <h4>Bug #1 : Console.log en production (ligne 55)</h4>
                <p><strong>Probl√®me :</strong> Un console.log() reste dans le code de production, ce qui peut exposer des informations sensibles et polluer la console du navigateur.</p>
                <p><strong>Impact :</strong> Exposition d'informations de debug, performance l√©g√®rement d√©grad√©e.</p>
            </div>

            <div class="code-block" data-file="src/containers/Bills.js - AVANT">
                <span class="code-line">30  getBills = () => {</span>
                <span class="code-line">31    if (this.store) {</span>
                <span class="code-line">32      return this.store</span>
                <span class="code-line">33      .bills()</span>
                <span class="code-line">34      .list()</span>
                <span class="code-line">35      .then(snapshot => {</span>
                <span class="code-line">36        const bills = snapshot</span>
                <span class="code-line">37          .map(doc => {</span>
                <span class="code-line">38            try {</span>
                <span class="code-line">39              return {</span>
                <span class="code-line">40                ...doc,</span>
                <span class="code-line">41                date: doc.date,</span>
                <span class="code-line">42                status: formatStatus(doc.status)</span>
                <span class="code-line">43              }</span>
                <span class="code-line">44            } catch(e) {</span>
                <span class="code-line">45              console.log(e,'for',doc)</span>
                <span class="code-line">46              return {</span>
                <span class="code-line">47                ...doc,</span>
                <span class="code-line">48                date: doc.date,</span>
                <span class="code-line">49                status: formatStatus(doc.status)</span>
                <span class="code-line">50              }</span>
                <span class="code-line">51            }</span>
                <span class="code-line">52          })</span>
                <span class="code-line highlight">55          console.log('length', bills.length)</span>
                <span class="code-line">56        return bills</span>
                <span class="code-line">57      })</span>
                <span class="code-line">58    }</span>
                <span class="code-line">59  }</span>
            </div>

            <div class="fix-card">
                <h4>‚úÖ Correction Appliqu√©e</h4>
                <p>Suppression du console.log() √† la ligne 55 pour nettoyer le code de production.</p>
            </div>

            <div class="code-block" data-file="src/containers/Bills.js - APR√àS">
                <span class="code-line">30  getBills = () => {</span>
                <span class="code-line">31    if (this.store) {</span>
                <span class="code-line">32      return this.store</span>
                <span class="code-line">33      .bills()</span>
                <span class="code-line">34      .list()</span>
                <span class="code-line">35      .then(snapshot => {</span>
                <span class="code-line">36        const bills = snapshot</span>
                <span class="code-line">37          .map(doc => {</span>
                <span class="code-line">38            try {</span>
                <span class="code-line">39              return {</span>
                <span class="code-line">40                ...doc,</span>
                <span class="code-line">41                date: doc.date,</span>
                <span class="code-line">42                status: formatStatus(doc.status)</span>
                <span class="code-line">43              }</span>
                <span class="code-line">44            } catch(e) {</span>
                <span class="code-line">45              console.log(e,'for',doc)</span>
                <span class="code-line">46              return {</span>
                <span class="code-line">47                ...doc,</span>
                <span class="code-line">48                date: doc.date,</span>
                <span class="code-line">49                status: formatStatus(doc.status)</span>
                <span class="code-line">50              }</span>
                <span class="code-line">51            }</span>
                <span class="code-line">52          })</span>
                <span class="code-line">56        return bills</span>
                <span class="code-line">57      })</span>
                <span class="code-line">58    }</span>
                <span class="code-line">59  }</span>
            </div>
        </div>
    </div>

    <!-- Slide 5: Bugs Identifi√©s - NewBill.js -->
    <div class="slide">
        <h1>üêõ Bugs Identifi√©s - NewBill.js</h1>
        <div style="margin-top: 30px;">

            <div class="bug-card">
                <h4>Bug #2 : Validation des fichiers insuffisante</h4>
                <p><strong>Probl√®me :</strong> La validation des types de fichiers upload√©s n'√©tait pas assez stricte, permettant potentiellement l'upload de fichiers non autoris√©s.</p>
                <p><strong>Impact :</strong> Risque de s√©curit√©, fichiers malveillants possibles.</p>
            </div>

            <div class="code-block" data-file="src/containers/NewBill.js - Validation des fichiers">
                <span class="code-line">handleChangeFile = (e) => {</span>
                <span class="code-line">  e.preventDefault()</span>
                <span class="code-line">  const file = this.document.querySelector(`input[data-testid="file"]`).files[0]</span>
                <span class="code-line">  const filePath = e.target.value.split(/\\/g)</span>
                <span class="code-line">  const fileName = filePath[filePath.length-1]</span>
                <span class="code-line">  const formData = new FormData()</span>
                <span class="code-line">  const email = JSON.parse(localStorage.getItem("user")).email</span>
                <span class="code-line"></span>
                <span class="code-line highlight">  // Validation stricte des types de fichiers</span>
                <span class="code-line highlight">  const validExtensions = ['jpg', 'jpeg', 'png']</span>
                <span class="code-line highlight">  const fileExtension = fileName.split('.').pop().toLowerCase()</span>
                <span class="code-line highlight">  </span>
                <span class="code-line highlight">  if (!validExtensions.includes(fileExtension)) {</span>
                <span class="code-line highlight">    alert('Seuls les fichiers aux formats jpg, jpeg ou png sont autoris√©s.')</span>
                <span class="code-line highlight">    e.target.value = ''</span>
                <span class="code-line highlight">    return</span>
                <span class="code-line highlight">  }</span>
                <span class="code-line"></span>
                <span class="code-line">  formData.append('file', file)</span>
                <span class="code-line">  formData.append('email', email)</span>
                <span class="code-line">  // ... reste du code</span>
            </div>

            <div class="fix-card">
                <h4>‚úÖ Correction Appliqu√©e</h4>
                <p>Ajout d'une validation stricte des extensions de fichiers (jpg, jpeg, png uniquement) avec message d'erreur clair et blocage de l'upload si le fichier n'est pas valide.</p>
            </div>

            <div class="bug-card" style="margin-top: 30px;">
                <h4>Bug #3 : Gestion des erreurs API</h4>
                <p><strong>Probl√®me :</strong> Les erreurs 404 et 500 de l'API n'√©taient pas correctement g√©r√©es, causant des comportements inattendus.</p>
                <p><strong>Impact :</strong> Exp√©rience utilisateur d√©grad√©e, pas de feedback en cas d'erreur.</p>
            </div>

            <div class="fix-card">
                <h4>‚úÖ Correction Appliqu√©e</h4>
                <p>Ajout de la gestion des erreurs HTTP avec try/catch et affichage de messages d'erreur appropri√©s pour l'utilisateur.</p>
            </div>
        </div>
    </div>

    <!-- Slide 6: Impact des Bugs dans l'Interface -->
    <div class="slide">
        <h1>üñ•Ô∏è Impact des Bugs dans l'Interface</h1>
        <div style="margin-top: 30px;">

            <h2>Bug Console.log - Impact Visuel</h2>
            <div class="two-column">
                <div>
                    <h3>‚ùå Avant Correction</h3>
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-top: 10px;">
                        <p><strong>Console du navigateur :</strong></p>
                        <div class="code-block" style="font-size: 0.8em;">
                            <span class="code-line">length 5</span>
                            <span class="code-line">length 5</span>
                            <span class="code-line">length 5</span>
                            <span class="code-line">...</span>
                        </div>
                        <p style="margin-top: 10px; color: #dc3545;">‚ö†Ô∏è Pollution de la console √† chaque chargement de la liste</p>
                    </div>
                </div>
                <div>
                    <h3>‚úÖ Apr√®s Correction</h3>
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-top: 10px;">
                        <p><strong>Console du navigateur :</strong></p>
                        <div class="code-block" style="font-size: 0.8em;">
                            <span class="code-line" style="color: #28a745;">‚úì Console propre</span>
                        </div>
                        <p style="margin-top: 10px; color: #28a745;">‚úÖ Aucun log inutile en production</p>
                    </div>
                </div>
            </div>

            <h2 style="margin-top: 40px;">Bug Validation Fichier - Impact Utilisateur</h2>
            <div class="two-column">
                <div>
                    <h3>‚ùå Avant Correction</h3>
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-top: 10px;">
                        <p><strong>Sc√©nario :</strong> Utilisateur upload un fichier PDF</p>
                        <ul>
                            <li>Le fichier est accept√©</li>
                            <li>Pas de message d'erreur</li>
                            <li>Risque de s√©curit√©</li>
                        </ul>
                        <p style="color: #dc3545; margin-top: 10px;">‚ö†Ô∏è Comportement dangereux</p>
                    </div>
                </div>
                <div>
                    <h3>‚úÖ Apr√®s Correction</h3>
                    <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-top: 10px;">
                        <p><strong>Sc√©nario :</strong> Utilisateur upload un fichier PDF</p>
                        <ul>
                            <li>Le fichier est rejet√©</li>
                            <li>Message d'alerte affich√© : <em>"Seuls les fichiers aux formats jpg, jpeg ou png sont autoris√©s."</em></li>
                            <li>Le champ est r√©initialis√©</li>
                        </ul>
                        <p style="color: #28a745; margin-top: 10px;">‚úÖ S√©curit√© renforc√©e</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Slide 7: Tests Unitaires - Bills.js -->
    <div class="slide">
        <h1>üß™ Tests Unitaires - Bills.js</h1>
        <div style="margin-top: 30px;">

            <h2>Strat√©gie de Test</h2>
            <p>Tests couvrant les principales fonctionnalit√©s du container Bills :</p>
            <ul>
                <li>R√©cup√©ration de la liste des notes de frais</li>
                <li>Navigation vers la cr√©ation d'une nouvelle note</li>
                <li>Affichage du justificatif dans une modale</li>
                <li>Gestion des erreurs</li>
            </ul>

            <div class="test-card">
                <h4>Test 1 : getBills() - R√©cup√©ration r√©ussie</h4>
                <div class="code-block" style="font-size: 0.85em;">
                    <span class="code-line">test("fetches bills from an API and fails with 404 message error", async () => {</span>
                    <span class="code-line">  mockStore.bills.mockImplementationOnce(() => ({</span>
                    <span class="code-line">    list: () => Promise.reject(new Error("Erreur 404"))</span>
                    <span class="code-line">  }))</span>
                    <span class="code-line">  const onNavigate = (pathname) => { document.body.innerHTML = ROUTES_PATH({ pathname }) }</span>
                    <span class="code-line">  const bills = new Bills({ document, onNavigate, store: mockStore, localStorage })</span>
                    <span class="code-line">  const error = await bills.getBills()</span>
                    <span class="code-line">  expect(error).toBeUndefined()</span>
                    <span class="code-line">})</span>
                </div>
            </div>

            <div class="test-card">
                <h4>Test 2 : handleClickNewBill() - Navigation</h4>
                <div class="code-block" style="font-size: 0.85em;">
                    <span class="code-line">test("should navigate to NewBill page when button is clicked", () => {</span>
                    <span class="code-line">  const onNavigate = jest.fn()</span>
                    <span class="code-line">  const bills = new Bills({ document, onNavigate, store: mockStore, localStorage })</span>
                    <span class="code-line">  bills.handleClickNewBill()</span>
                    <span class="code-line">  expect(onNavigate).toHaveBeenCalledWith(ROUTES_PATH['NewBill'])</span>
                    <span class="code-line">})</span>
                </div>
            </div>

            <div class="test-card">
                <h4>Test 3 : handleClickIconEye() - Affichage modale</h4>
                <div class="code-block" style="font-size: 0.85em;">
                    <span class="code-line">test("should display bill proof in modal when icon is clicked", () => {</span>
                    <span class="code-line">  const bills = new Bills({ document, onNavigate: jest.fn(), store: mockStore, localStorage })</span>
                    <span class="code-line">  const icon = document.createElement('div')</span>
                    <span class="code-line">  icon.setAttribute('data-bill-url', 'https://test.com/bill.jpg')</span>
                    <span class="code-line">  bills.handleClickIconEye(icon)</span>
                    <span class="code-line">  expect($('#modaleFile').is(':visible')).toBe(true)</span>
                    <span class="code-line">})</span>
                </div>
            </div>

            <div style="background: #d4edda; padding: 15px; border-radius: 8px; margin-top: 20px;">
                <p><strong>‚úÖ Couverture atteinte :</strong> Toutes les m√©thodes publiques sont test√©es avec des cas de succ√®s et d'erreur.</p>
            </div>
        </div>
    </div>

    <!-- Slide 8: Tests Unitaires - NewBill.js -->
    <div class="slide">
        <h1>üß™ Tests Unitaires - NewBill.js</h1>
        <div style="margin-top: 30px;">

            <h2>Strat√©gie de Test</h2>
            <p>Tests couvrant la cr√©ation de notes de frais et la validation des fichiers :</p>

            <div class="test-card">
                <h4>Test 1 : Validation des fichiers - Formats accept√©s</h4>
                <div class="code-block" style="font-size: 0.85em;">
                    <span class="code-line">test("Then handleChangeFile should accept valid image files (jpg, jpeg, png)", async () => {</span>
                    <span class="code-line">  const newBill = createNewBillInstance()</span>
                    <span class="code-line">  simulateFileChange(newBill, 'test.jpg', 'image/jpeg')</span>
                    <span class="code-line"></span>
                    <span class="code-line">  await waitFor(() => {</span>
                    <span class="code-line">    expect(newBill.fileUrl).toBe('https://localhost:3456/images/test.jpg')</span>
                    <span class="code-line">    expect(newBill.fileName).toBe('test.jpg')</span>
                    <span class="code-line">    expect(newBill.billId).toBe('1234')</span>
                    <span class="code-line">    expect(global.alert).not.toHaveBeenCalled()</span>
                    <span class="code-line">  })</span>
                    <span class="code-line">})</span>
                </div>
            </div>

            <div class="test-card">
                <h4>Test 2 : Validation des fichiers - Formats rejet√©s</h4>
                <div class="code-block" style="font-size: 0.85em;">
                    <span class="code-line">test("Then handleChangeFile should reject invalid file types", () => {</span>
                    <span class="code-line">  const newBill = createNewBillInstance()</span>
                    <span class="code-line">  const mockTarget = simulateFileChange(newBill, 'test.pdf', 'application/pdf')</span>
                    <span class="code-line"></span>
                    <span class="code-line">  expect(global.alert).toHaveBeenCalledWith(</span>
                    <span class="code-line">    'Seuls les fichiers aux formats jpg, jpeg ou png sont autoris√©s.'</span>
                    <span class="code-line">  )</span>
                    <span class="code-line">  expect(mockTarget.value).toBe('')</span>
                    <span class="code-line">})</span>
                </div>
            </div>

            <div class="test-card">
                <h4>Test 3 : Soumission du formulaire</h4>
                <div class="code-block" style="font-size: 0.85em;">
                    <span class="code-line">test("Then handleSubmit should create a bill and navigate to Bills page", async () => {</span>
                    <span class="code-line">  const onNavigate = jest.fn()</span>
                    <span class="code-line">  const newBill = createNewBillInstance(onNavigate)</span>
                    <span class="code-line"></span>
                    <span class="code-line">  simulateFileChange(newBill, 'test.jpg', 'image/jpeg')</span>
                    <span class="code-line">  // ... remplissage du formulaire</span>
                    <span class="code-line">  fireEvent.submit(screen.getByTestId('form-new-bill'))</span>
                    <span class="code-line"></span>
                    <span class="code-line">  expect(onNavigate).toHaveBeenCalledWith(ROUTES_PATH['Bills'])</span>
                    <span class="code-line">})</span>
                </div>
            </div>

            <div style="background: #d4edda; padding: 15px; border-radius: 8px; margin-top: 20px;">
                <p><strong>‚úÖ Couverture atteinte :</strong> Validation des fichiers, soumission du formulaire, gestion des erreurs.</p>
            </div>
        </div>
    </div>

    <!-- Slide 9: Tests d'Int√©gration -->
    <div class="slide">
        <h1>üîó Tests d'Int√©gration</h1>
        <div style="margin-top: 30px;">

            <h2>Test End-to-End du Parcours Employ√©</h2>
            <p>Test complet simulant le parcours utilisateur r√©el :</p>

            <div class="test-card">
                <h4>Test d'Int√©gration : Parcours complet de cr√©ation de note</h4>
                <div class="code-block" style="font-size: 0.85em;">
                    <span class="code-line">test("Then the complete flow should work: file upload -> form submission -> navigation", async () => {</span>
                    <span class="code-line">  const onNavigate = jest.fn()</span>
                    <span class="code-line">  const createSpy = jest.spyOn(mockStore.bills(), 'create')</span>
                    <span class="code-line">  const updateSpy = jest.spyOn(mockStore.bills(), 'update')</span>
                    <span class="code-line">  const newBill = createNewBillInstance(onNavigate)</span>
                    <span class="code-line"></span>
                    <span class="code-line">  // 1. Upload du fichier</span>
                    <span class="code-line">  simulateFileChange(newBill, 'facture.jpg', 'image/jpeg')</span>
                    <span class="code-line">  await waitFor(() => {</span>
                    <span class="code-line">    expect(createSpy).toHaveBeenCalled()</span>
                    <span class="code-line">    expect(newBill.fileUrl).toBe('https://localhost:3456/images/test.jpg')</span>
                    <span class="code-line">  })</span>
                    <span class="code-line"></span>
                    <span class="code-line">  // 2. Remplissage du formulaire</span>
                    <span class="code-line">  await userEvent.selectOptions(screen.getByTestId('expense-type'), 'H√¥tel et logement')</span>
                    <span class="code-line">  await userEvent.type(screen.getByTestId('expense-name'), 'H√¥tel Paris')</span>
                    <span class="code-line">  // ... autres champs</span>
                    <span class="code-line"></span>
                    <span class="code-line">  // 3. Soumission</span>
                    <span class="code-line">  const submitBtn = screen.getByText("Envoyer")</span>
                    <span class="code-line">  userEvent.click(submitBtn)</span>
                    <span class="code-line"></span>
                    <span class="code-line">  // 4. V√©rification</span>
                    <span class="code-line">  await waitFor(() => {</span>
                    <span class="code-line">    expect(updateSpy).toHaveBeenCalled()</span>
                    <span class="code-line">    const billData = JSON.parse(updateSpy.mock.calls[0][0].data)</span>
                    <span class="code-line">    expect(billData.type).toBe('H√¥tel et logement')</span>
                    <span class="code-line">    expect(billData.status).toBe('pending')</span>
                    <span class="code-line">  })</span>
                    <span class="code-line"></span>
                    <span class="code-line">  expect(onNavigate).toHaveBeenCalledWith(ROUTES_PATH['Bills'])</span>
                    <span class="code-line">})</span>
                </div>
            </div>

            <h2 style="margin-top: 30px;">Tests des Erreurs API</h2>
            <div class="test-card">
                <h4>Test Erreur 404</h4>
                <p>V√©rification que l'application g√®re correctement les erreurs 404 de l'API.</p>
            </div>

            <div class="test-card">
                <h4>Test Erreur 500</h4>
                <p>V√©rification que l'application g√®re correctement les erreurs serveur (500).</p>
            </div>

            <div style="background: #d4edda; padding: 15px; border-radius: 8px; margin-top: 20px;">
                <p><strong>‚úÖ Couverture globale :</strong> <span class="highlight">‚â• 80%</span> sur les containers Bills et NewBill (tests unitaires + int√©gration)</p>
            </div>
        </div>
    </div>

    <!-- Slide 10: R√©sultats et M√©triques -->
    <div class="slide">
        <h1>üìä R√©sultats et M√©triques</h1>
        <div style="margin-top: 30px;">

            <h2>Bugs Corrig√©s</h2>
            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin: 20px 0;">
                <div style="background: #fff3cd; padding: 20px; border-radius: 8px;">
                    <h3>Bills.js</h3>
                    <ul>
                        <li>‚úÖ Suppression console.log() ligne 55</li>
                    </ul>
                </div>
                <div style="background: #fff3cd; padding: 20px; border-radius: 8px;">
                    <h3>NewBill.js</h3>
                    <ul>
                        <li>‚úÖ Validation stricte des fichiers</li>
                        <li>‚úÖ Gestion des erreurs API (404, 500)</li>
                    </ul>
                </div>
            </div>

            <h2 style="margin-top: 40px;">Couverture de Tests</h2>
            <div style="background: #e7f3ff; padding: 25px; border-radius: 10px; margin: 20px 0;">
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; text-align: center;">
                    <div>
                        <h3 style="font-size: 3em; color: #2196F3; margin: 0;">‚â•80%</h3>
                        <p>Couverture globale</p>
                    </div>
                    <div>
                        <h3 style="font-size: 2em; color: #28a745; margin: 0;">Bills.js</h3>
                        <p>Tests unitaires complets</p>
                    </div>
                    <div>
                        <h3 style="font-size: 2em; color: #28a745; margin: 0;">NewBill.js</h3>
                        <p>Tests unitaires + int√©gration</p>
                    </div>
                </div>
            </div>

            <h2 style="margin-top: 40px;">Livrables</h2>
            <ul>
                <li>‚úÖ <strong>Bugs corrig√©s</strong> - Tous les bugs identifi√©s par Jest et Le√Øla ont √©t√© r√©solus</li>
                <li>‚úÖ <strong>Tests unitaires</strong> - Couverture ‚â• 80% atteinte pour Bills et NewBill</li>
                <li>‚úÖ <strong>Tests d'int√©gration</strong> - Parcours complet test√©</li>
                <li>‚úÖ <strong>Plan de test E2E</strong> - Document r√©dig√© pour guider Le√Øla</li>
            </ul>
        </div>
    </div>

    <!-- Slide 11: Conclusion -->
    <div class="slide">
        <div style="text-align: center; padding: 60px 0;">
            <h1>üéØ Conclusion</h1>
            <div style="margin-top: 60px; max-width: 800px; margin-left: auto; margin-right: auto;">
                <div style="background: #d4edda; padding: 30px; border-radius: 10px; margin: 20px 0;">
                    <h2 style="color: #155724; margin-bottom: 20px;">‚úÖ Mission Accomplie</h2>
                    <ul style="text-align: left; font-size: 1.2em;">
                        <li style="margin: 15px 0;">üêõ <strong>Tous les bugs corrig√©s</strong> - Application fonctionnelle</li>
                        <li style="margin: 15px 0;">üß™ <strong>Tests complets</strong> - Couverture ‚â• 80% atteinte</li>
                        <li style="margin: 15px 0;">üìù <strong>Plan E2E r√©dig√©</strong> - Guide pour les tests manuels</li>
                        <li style="margin: 15px 0;">üöÄ <strong>Application pr√™te</strong> - Pour le lancement dans 2 semaines</li>
                    </ul>
                </div>

                <div style="margin-top: 60px; font-size: 1.5em; color: #667eea; font-weight: bold;">
                    Merci pour votre attention ! üôè
                </div>
                <div style="margin-top: 30px; font-size: 1.3em; color: #764ba2;">
                    Questions ?
                </div>
            </div>
        </div>
    </div>
</div>

<div class="slide-counter">
    <span id="current-slide">1</span> / <span id="total-slides">11</span>
</div>

<div class="navigation">
    <button class="nav-btn" id="prev-btn" onclick="changeSlide(-1)">‚Üê Pr√©c√©dent</button>
    <button class="nav-btn" id="next-btn" onclick="changeSlide(1)">Suivant ‚Üí</button>
</div>

<script>
  let currentSlide = 0;
  const slides = document.querySelectorAll('.slide');
  const totalSlides = slides.length;

  document.getElementById('total-slides').textContent = totalSlides;

  function showSlide(n) {
    slides[currentSlide].classList.remove('active');
    currentSlide = (n + totalSlides) % totalSlides;
    slides[currentSlide].classList.add('active');

    document.getElementById('current-slide').textContent = currentSlide + 1;

    // Gestion des boutons
    document.getElementById('prev-btn').disabled = currentSlide === 0;
    document.getElementById('next-btn').disabled = currentSlide === totalSlides - 1;
  }

  function changeSlide(direction) {
    showSlide(currentSlide + direction);
  }

  // Navigation au clavier
  document.addEventListener('keydown', function(e) {
    if (e.key === 'ArrowLeft') changeSlide(-1);
    if (e.key === 'ArrowRight') changeSlide(1);
  });

  // Initialisation
  showSlide(0);
</script>
</body>
</html>
